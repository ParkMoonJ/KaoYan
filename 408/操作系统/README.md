# 操作系统

## Week 1

### 1.1 操作系统的基本概念

#### 学习建议

- 多道操作系统四个特征：并发、共享、虚拟、异步，并发和共享是基本特征
- 并发：宏观上多道同时执行，微观上分时执行  
  并行：同一时刻多道同时执行

#### 考研修仙

- 道上人：了解操作系统概念、操作系统关心的问题

> 小题：1，2，3，4

- 道上佬：理解操作系统的功能、特征

> 小题：5，6，7，8，9，10，17，18，19

- 道上仙：理解系统调用、接口

> 小题：11，12，13，14，15，16  
> 大题：1

### 1.2 操作系统的发展与分类

#### 学习建议

- 学会分析不同操作系统利弊

#### 考研修仙

- 道上人：了解不同操作系统含义

> 小题：1，7，9，12

- 道上佬：理解不同操作系统的特点

> 小题：2，3，4，10，11，13，14，15  
> 大题：1

- 道上仙：学会画甘特图，学会计算 CPU 利用率

> 大题：2，3

### 1.3 操作系统的运行环境

#### 学习建议

- 记住中断的定义以及过程
- 判断指令是用户态还是核心态时区分指令的发生和执行，比如系统调用可以发送在用户态，执行在核心态

#### 考研修仙

- 道上人：理解中断的定义、分类

> 小题：4，5，6，8

- 道上佬：理解用户态、核心态，区分不同指令处于用户态还是核心态

> 小题：9，10，11，12，13，14，15，16，17，18，19，20，21  
> 大题：1，2

- 道上仙：掌握中断处理的过程，学会区分中断、异常等

> 小题：1，2，3，7，22，24，25

### 1.4 操作系统的体系结构

#### 学习建议

- 大内核功能多、性能好但不稳定，微内核稳定但性能差

#### 考研修仙

- 道山人：理解大内核与微内核

> 小题：1

### 2.1 进程与线程

#### 学习建议

- 进程通信
  - 低级：信号量
  - 高级
    - 共享存储（数据结构、存储区）
    - 消息传递（消息缓冲通信、信箱通信）
    - 管道通信
- 牢记三态模型的定义、互相转化，不需要记忆创建和撤销态的转化
- 阻塞是本进程自主阻塞（Block），唤醒是其他进程唤醒该进程（Wake-up）
- 进程的静态描述及其处理器执行环境合称进程上下文，包括用户级上下文、系统级上下文和寄存器上下文

#### 考研修仙

- 道上人：掌握进程的定义、构成，掌握进程二态定义，理解进程通信的多种方式

> 小题：1，3，4，6，14，15，16，21，25，29，46  
> 大题：3，4

- 道上佬：理解运行态、就绪态和阻塞态的转化

> 小题：2，5，7，8，9，10，11，12，13，17，18，23，24，26，27，28，45  
> 大题：1，2，5

- 道上仙：理解进程与线程的关系，掌握线程的多种模型

> 小题：19，20，22，30，31，32，33，34，35，36，37，38，40，41，42，43，44，47，48，49，50  
> 大题：6，7

### 2.2 处理机调度

#### 学习建议

- 处理机调度可分为（频率由低到高）
  - 作业调度（低级）
  - 内存调度（中级）
  - 进程调度（高级）
- 不能调度的情况：
  - 处理中断过程中
  - 进程在 OS 内核临界区中
  - 其他需要屏蔽中断的原子操作中

#### 考研修仙

- 道上人：掌握周转时间、带权周转时间、响应时间等概念的定义和计算方式，理解多种调度方法的原理及调度策略

> 小题：1，2，5，7，9，12

- 道上佬：理解不同调度策略的特点，根据要求选择不同的调度策略，理解计算机何时进行调度

> 小题：3，4，10，11，13，14，15，16，20，24，25，26，28，29，30  
> 大题：1，2

- 道上仙：掌握不同调度策略的计算

> 小题：6，8，17，18，19，21，27  
> 大题：3，4，5，6，7，8，9，11，12

### 2.3 进程同步（上）

#### 学习建议

- 管程考点：管程通过防止对一个资源的同时访问以实现临界区，管程的条件变量是无值的（只表示阻塞的原因）
- 对于每种同步方法，学会分析其优缺点，能把代码与对应同步方法对应（单标志、Peterson等）

#### 考研修仙

- 道上人：理解临界区、可重用代码、原语的概念，理解同步机制应遵循的准则

> 小题：1，6，7，8，15，20，44

- 道上佬：区分临界资源，理解进程互斥的不同实现方法（软件、硬件），区分不同情况对应的同步机制准则

> 小题：5，9，10，11，12，16，21，27，28，29，32，34，41  
> 大题：1，2

- 道上仙：根据代码判断互斥、同步关系以及计算可能的取值

> 小题：36，37，39  
> 大题：4，5

### 2.3 进程同步（下）

#### 学习建议

- 管程考点：管程通过防止对一个资源的同时访问以实现临界区，管程的条件变量是无值的（只表示阻塞的原因）
- 信号量有五类题：生产者消费者问题、读者写者问题、哲学家进餐问题、吸烟者问题、理发师问题，其中重点复习生产者消费者问题和读者写者问题
- 做信号量题目时：
  1. 考虑有哪些互斥和同步的信号量（先考虑同步，考虑互斥）
  2. 分析属于哪-类问题，这要求我们对于上述几类问题非常熟悉

#### 考研修仙

- 道上人：理解何为 PV 操作，理解同步和互斥问题中信号量的初值

> 小题：2，3，13，14，17，18，19，22

- 道上佬：理解不同情况下信号量的意义、取值范围，理解管程的原理

> 小题：4，16，23，24，25，26，28，29，31，33，35，42，43

- 道上仙：掌握信号量代码题

> 小题：45  
> 大题：3，6，7，8，9，10，11，12，13，14，15，16，17，18，20，21，22

### 2.4 死锁

#### 学习建议

- 由严格到宽松：预防（破坏死锁必要条件） ->避免（银行家算法） ->检测（死锁定理）并解除
- 本节重点是银行家算法，需要掌握流程，学会做题

#### 考研修仙

- 道上人：理解死锁产生的原因、理解不同死锁处理策略的原理

> 小题：2，4，10，11，13

- 道上佬：掌握死锁与不安全状态的关系，掌握资源分配图以及死锁定理

> 小题：1，3，5，6，7，8，9，12，14，15，16，17，18，24，25，30，32  
> 大题：1，2，3，4，5

- 道上仙：掌握银行家算法流程，根据代码判断是否饥饿、死锁

> 小题：19，20，21，22，23，26，27，28，29  
> 大题：6，7，8，9

## Week 4

### 3.1 内存管理概念

#### 学习建议

- 颇式中逻辑分段，物理分页，先查段表再查页表。每个进程有一个段表，每段有一个页表（所以每个进程可能有多个页表）
- 对于 n 级页表，得到物理地址需要 n 次访存

#### 考研修仙

- 道上人：掌握程序执行过程，了解覆盖与交换（考纲中已删除，但可以了解）

> 小题：3，4，9，18，19，20，33

- 道上佬：理解单一连续分配、固定分区分配、动态分区分配、页式存储、段式存储的原理和特点，能模拟进程换入换出内存的过程，理解内部碎片和外部碎片

> 小题：1，2，5，7，8，10，13，14，15，21，22，23，24，25，26，27，28，30，31，34，35，36，37，38，39，40，41，42，45，46，47，50，52  
> 大题：1

- 道上仙：在页式和段式的基础上理解段页式存储，掌握地址划分，掌握逻辑地址和物理地址的转换

> 小题：6，11，12，16，17，29，43，44，48，49，51，53  
> 大题：2，3，4，5，6，7，8，9，10，11，12

## Week 5

### 3.2 虚拟内存管理

#### 学习建议

- 抖动（也即颠簸）是指页面频繁换入换出
- 只有 FIFO 会有 Belady 异常现象

#### 考研修仙

- 道上人：理解虚拟存储器的定义，理解局部性原理

> 小题：1，6，7，8，13，14，19，20，26

- 道上佬：理解请求分页机制（他与分页机制的区别是什么），掌握缺页中断的处理过程，理解缺页次数的影响因素，掌握页面置换算法的过程及策略

> 小题：2，3，4，5，9，10，11，12，17，21，22，23，25，27，28，29，31，32，33，37，38  
> 大题：1，4，7，8，11，12，14，15

- 道上仙：掌握不同页面置换算法的特点并会模拟置换页面过程，掌握虚实地址变换流程（最好能自己画图模拟），学会计算访问时间

> 小题：15，16，18，24，30，34，35  
> 大题：2，3，5，6，9，10，13

## Week 6

### 4.1 文件系统基础

#### 学习建议

- 本节重在理解何为文件，何为文件的逻辑结构：文件的逻辑结构是一种抽象的结构（顺序、索引或索引顺序），可以根据关键字查找到该文件所在的逻辑地址而不涉及具体的实现，比如说我根据关键字查找到该记录是第 100 个记录，但是他具体是在光盘上还是硬盘上这是未知的，只有根据这一逻辑地址去查找该记录的物理地址（这是两个不同的过程，类比一下访存过程也是分成两个部分）
- 文件操作：搜索、创建、删除、打开、写打开、关闭、共享等
  - 用户可以通过文件系统提供的系统调用实施对文件的操作（即文件操作可以看作是系统调用）

#### 考研修仙

- 道上人：理解文件的定义，理解何为文件的逻辑结构

> 小题：1，3，8

- 道上佬：掌握不同逻辑结构及相应计算，理解文件的各种操作，理解目录的定义并掌握不同目录结构，区分绝对路径与相对路径，了解文件保护的机制，区分文件与目录

> 小题：2，4，5，7，9，10，11，13，14，15，17，18，20，23，24，25，26，27  
> 大题：1，2

- 道上仙：理解文件共享方式（软、硬链接的区分），理解掌握不同目录管理方式（文件目录项和索引节点）

> 小题：6，12，16，19，21，29  
> 大题：3，4

### 4.2 文件系统实现

#### 学习建议

- 区分逻辑结构和物理结构有一个好方法，可以考虑对于该结构的查找是否涉及到了具体的设备，比如对于物理结构的查找会涉及到磁盘 I/O 次数
- 隐式链接需要 $n + 1$ 次 I/O，显式链接需要 2 次 I/O，显式链接需要 FAT 表，链接如果没说清楚默认是隐式链接

#### 考研修仙

- 道上人：理解文件系统层次，理解何为文件的物理结构

> 小题：17

- 道上佬：掌握文件物理结构实现（顺序、链接、索引）及其特点，理解文件的存储空间管理方法

> 小题：1，3，4，5，6，7，9，13，14，15，18，21  
> 大题：1，3，10

- 道上仙：区分文件的物理结构和逻辑结构，掌握文件磁盘访问次数等的相关计算

> 小题：2，8，10，11，12，16，19，20  
> 大题：2，4，5，7，8，9，11，12，13，14，15

## Week 7

### 4.3 磁盘组织与管理

#### 学习建议

- $读写时间 = 寻找时间（受调度算法影响） + 旋转延迟时间（一般取 \frac{1}{2} 圈）+ 传世时间（传输数据量 / 速度）$
- $物理格式化（划分分区）\rightarrow 逻辑格式化（建立文件系统）$

#### 考研修仙

- 道上人：了解磁盘的结构特点与物理地址构成

> 小题：1，2，3，5

- 道上佬：了解磁盘格式化等过程，掌握读写操作时间等计算

> 小题：4，6，7，11，12，13，16

- 道上仙：理解不同磁盘调度算法并学会模拟，掌握磁盘总和计算（地址、访盘次数等）

> 小题：8，9，10，14，15，17  
> 大题：1，2，3，4，5，6

### 5.1 I/0 管理概述

#### 学习建议

- I/O 的层次结构可以与磁盘的运行过程结合考虑

#### 考研修仙

- 道上人：按照不同标志对 I/O 设备分类

> 小题：1，2，3

- 道上佬：掌握不同 I/O 控制方式及特点

> 小题：7，8，9，10，11，15，16，18  
> 大题：1，2

- 道上仙：掌握 I/O 层次划分以及各层的工作，掌握设备控制器的组成

> 小题：4，5，6，12，13，14，17，19，20，22，23，24，25  
> 大题：3，4，5

## Week 8

### 5.2 I/O 核心子系统

#### 学习建议

- 关于单缓冲和双缓冲的计算，可以算出一块和两块数据需要的时间（模拟），相减就是每增加一块数据需要的时间，然后解方程就可推出公式（这样可以不用记公式）

#### 考研修仙

- 道上人：理解缓存和缓冲的异同，了解设备分类

> 小题：3，4，6，8，10，13，16

- 道上佬：理解 SPOOLing 技术的原理， 了解设备分配的数据结构以及对应关系，掌握设备分配策略

> 小题：1，2，5，7，9，17，18，19，20，21，22，23，24，25，26，27，28，29，31
> 大题1，2

- 道上仙：掌握缓冲区数据处理流程以及时间的计算

> 小题：11，12，14，15
> 大题：3，4，5，6

## 操作系统学习内容总结

操作系统学习重在理解基本概念：如虚拟、中断等。

第一章重在理解多任务操作系统特点：并发、共享、虚拟、异步，期中并发和共享是基本特点；中断的概念是贯穿本书的，中断保证了多任务实现；而对于系统调用比如磁盘、文件的一些基本操作都可认为是系统调用。

第二章需要重点复习，特别是调度算法与信号量问题。注意区分进程与线程：进程是资源分配的最小单位，线程是调度的最小单位（注意区分内核态线程和用户态线程）；要熟悉三态模型（执行、就绪、阻塞态）的相互转化；三种调度（作业、中级、进程）的频率、适用的情况不同；掌握不同调度算法（FCFS、 SJF、 优先级、高响应比、时间片轮转、多级队列）的思想以及特点；同步互所问题中必须掌握信号量（读者写者、哲学家、产者消费者理发师、吸烟者）；理解何为死锁，不同死锁处理策略：预防（破坏死锁必要条件）、避免（对某些资源申请不分配，防止进入不安全状态）、检测和解除（放任分配，再检测并解除死锁）。

第三章也是重点，重在掌握非连续分配（页式、段式、颇式），以及虚拟存储需要和计组结合复习；页面置换算法（OPT、 FIFO、LRU、CLOCK）需要掌握原理及计算。

第四章文件部分重在区分文件逻辑结构和物理结构；掌握文件基本操作；掌握磁盘调度算法的原理及计算（FIFS、SSTF、SCAN、C-SCAN）；掌握磁盘访问时间计算：$总时间 = 寻道时间 + 旋转时间 + 传输时间$。

第五章 I/0 重在掌握 I/0 系统层次，与磁盘联系记忆；注意区分缓冲和缓存。