# 计算机组成原理期末考试

## 选择题

### 1. 【单选】（2 分）某 SRAM 芯片，存储容量为 $64 K * 16$ 位，该芯片的地址线和数据线数目分别为（ ）

- [ ] A. 64 8
- [ ] B. 16 64
- [ ] C. 64 16
- [x] D. 16 16

> 参考答案：D
> 
> 本题考察地址线和数据线的定义。
> 
> 有 $64 K = 2^{16}$ 个存储单元，所以地址线为 16，每个单元 16 位，所以数据线为16，故选 D。

### 2. 【单选】（2 分）在 cache—主存—辅存体系中，cache—主存的作用是解决（ ）问题

- [ ] A. 主存与辅存速度不匹配
- [x] B. CPU 与主存速度不匹配
- [ ] C. 主存容量不足
- [ ] D. Cache 容量不足

> 参考答案：B
> 
> 本题考察多级存储体系。
> 
> CPU（Cache）—主存是为了解决 CPU 和主存间的速度不匹配问题，而主存—辅存是为了解决主存的容量不足问题，故选 B。



### 3. 【单选】（2 分）周期挪用方式常用于（ ）

- [x] A. DMA
- [ ] B. 中断
- [ ] C. 通道
- [ ] D. 直接程序传送

> 参考答案：A
> 
> 本题考察不同 I/O 方式特点。
> 
> 在 DMA 方式中，DMA 想要使用主存就会面临和 CPU 的冲突问题，采用以下三种方式：停止 CPU 访问、周期挪用、DMA 与主存交替访存，故选 A。

### 4. 【单选】（2 分）C 语言代码代码如下：

```cpp
‏short a, b, c;
a = 0xFFFD;
b = 0x0004;
c = a * b;
```

### 变量 `c` 的机器数为（   ）

- [x] A. `FFF4H`
- [ ] B. `FFE8H`
- [ ] C. `FFFAH`
- [ ] D. `FFFEH`

> 参考答案：A
> 
> 本题考察机器数与真值的转化。
> 
> 本题有两种方式，第一种是补码乘法，复杂不推荐；第二种是先把机器码变成真值，再计算乘法求出结果，最后把结果转为机器码，如下：$FFFD_H = 10000_H - 3$，所以$a = -3$，$b = 4$，$a \times b = -12$，$-12 = FFF4_H$，故选 A。

### 5. 【单选】（2 分）设 cache 容量为 $1K$ 字，每块 4 字，字长为 $32 bit$，采用 4 路组相联映射，主存地址为 `0x51704100` 的数据映射到 cache 哪一组（   ）

- [ ] A. 2
- [x] B. 16
- [ ] C. 1
- [ ] D. 4

> 参考答案：B
> 
> 本题考察 cache 映射。
> 
> 对于 cache 映射首先需要把物理地址进行划分，按字节编址（如果没说的话也默认按字节），块大小为 $4 字 = 4 \times 32 bit = 2^4 B$，总块数为 $1 K / 4 = 2^8$，组数为 $2^6$，地址低 10 位为 `100000/0000`，所以组数为 $100000_B=16$，故选 B。

### 6. 【单选】（2 分）对于五段流水线，理想情况下，CPI 为 1 的是（   ）

- I. 基本流水线 CPU
- II. 超标量流水线 CPU
- III. 超流水线 CPU
- IV. 不采用流水线

- [ ] A. I、IV
- [ ] B. I、II和III
- [x] C. I
- [ ] D. I、III

> 参考答案：C
> 
> 本题考察流水线。
> 
> 理想情况下基本五段流水线 $CPI = 1$，按照这种划分法不采用流水线时 $CPI = 5$，超流水线和超标量流水线是在基本流水线的基础上进一步并行，会导致 $CPI < 1$。

### 7. 【单选】（2 分）属于易失性存储器的是（ ）

- [ ] A. 闪存
- [ ] B. 固态硬盘
- [ ] C. EEPROM
- [x] D. Cache

> 参考答案：D
> 
> 本题考察存储器。
> 
> 闪存、固态硬盘和 EEPROM 都是 ROM，非易失，而 cache 失 SRAM，是易失的，故选 D。

### 8. 【单选】（2 分）以下寻址方式中取得数据要访存两次的是（ ）

- [ ] A. 相对寻址
- [x] B. 一次间接寻址
- [ ] C. 寄存器一次间接寻址
- [ ] D. 隐含寻址

> 参考答案：B
> 
> 本题考查寻址方式，可以看书上的表格。
> 
> 相对寻址和寄存器一次间址都是从寄存器中取出数据，计算得到操作数的地址，再访问内存一次，所以是一次访存；隐含寻址不需要访存，直接隐含在特定操作数中；一次间接寻址需要访存一次得到操作数地址，再访存一次得到操作数，所以是访存两次。故选 B。

### 9. 【单选】（2 分）DMA 方式是在（ ）之间建立一条直接数据通路

- [ ] A. CPU和主存
- [ ] B. 两个I/O设备
- [x] C. I/O设备和主存
- [ ] D. I/O设备和磁盘

> 参考答案：C
> 
> 本题考察 DMA 方式。
> 
> DMA 方式不通过 CPU，直接与内存进行数据交换，所以是 I/O 设备和主存间建立直接数据通路，故选 C。

### 10. 【单选】（2 分）IEEE 754 单精度浮点格式表示的数中，最大的规格化正数是（ ）。

- [ ] A. 2128-2103
- [ ] B. 2127-2104
- [x] C. 2128-2104
- [ ] D. 2127-2103

> 参考答案：C
> 
> 本题考察 IEEE 754。
> 
> 对于单精度（数符 1 位，阶码 8 位，尾数 23 位）最大正数，阶码最大为 $1111110$（全一表示上溢）对应真值为 $254 - 127 = 127$，尾数最大为 23 位全 1（隐 1 位），所以是 $1 + 2^{-1} + 2^{-2} + \cdots + 2^{-23} = 2 - 2^{-23}，浮点数的值为 $(2 - 2^{-23}) \times 2^{127} = 2^{128} - 2{104}$，故选 C。

### 11. 【单选】（2 分）中断发生时不属于硬件完成的工作为（   ）

- [ ] A. 引出中断服务程序
- [ ] B. 保存断点
- [x] C. 保存现场
- [ ] D. 关中断

> 参考答案：C
> 
> 本题考查中断处理过程。
> 
> - 硬件：关中断—保存断点—引出中断服务程序；
> - 中断程序：保持现场和屏蔽字—开中断—执行中断服务程序—关中断—恢复现场和屏蔽字—开中断—中断返回。

## 应用题

### 1. （13 分）某计算机一个总线周期能并行传送 $32 bit$，存储体采用低位 4 体交叉，CPU 主频为 $500 MHz$，总线频率为 $56 MHz$：
‏
#### （1）总线带宽是多少？（2 分）

$$
\begin{aligned}
总线频率 &\times 总线每次传输的 bit 数 &= 总线带宽 \\
56 MHz &\times 32 bit &= 1792 Mb/s
\end{aligned}
$$

#### （2）若总线频率变为 $80 MHz$，其他不变，总线带宽是多少？（2 分）

$$
80 MHz \times 32 bit = 2560 Mb/s
$$

#### （3）若 CPU 频率变为 $600 MHz$，其他不变，总线带宽是多少？（2 分）
‏
不变，还是 $1792 Mb/s$，和 CPU 频率无关。

#### （4）若总线每个周期传输 $64 bit$，其他不变，总线带宽是多少？（2 分）
‏
$$
56 MHz \times 64 bit = 3584 Mb/s
$$

#### （5）如何提高总线频率？（3 分）

- 提高总线频率
- 提高每个总线传输的 bit 位数
- 猝发传输

### 2. （10 分）计算机 CPU 的主频为 $100 MHz$，CPI 为 5，平均每条指令访存 2.5 次，计算机使用 cache 时的访存顺序为先访问 cache，若未命中再访问内存，访问内存的时间为 $5t$，访问 cache 的时间为 $t$。

#### （1）该计算机 MIPS 数为多少？（2 分）

$$
100 MHz / CPI = 20 MIPS
$$

#### （2）Cache 命中率为多少时，使用 cache 和不使用 cache 的平均访问时间之比为 $2 : 5$，求 cache 命中率。（3 分）

设 cache 命中率为 $x$，使用 cache 时 $平均访问时间 = xt + (1 - x) \times (1 + 5)t = (6 - 5x)t$，不使用 cache 时 $平均访问时间 = 5t$，所以 $(6 - 5x)t : 5t = 2 : 5$，$x = 80\%$，cache 命中率为 $80\%$。

#### （3）在（2）的条件下计算使用 cache，平均每条指令在访存上所花时间是多少？平均每秒 cache 缺失多少次？（5 分）

$$
2.5 \times ((1 - 80\%) \times 5t + 1) = 5t \\
20 MIPS \times 2.5 \times (1 - 80\%) = 每秒缺失 10 M 次
$$